<!DOCTYPE html>
<html lang="en" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/css/style.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
    />
    <title>Course Page</title>
  </head>
  <body>
    <!-- edit course modal-->
    <!-- ! add visible class to be visible ! -->
    <div class="modal-container" id="edit-modal">
      <!-- ! add visible class to be visible ! -->
      <div class="modal-content">
        <!-- ! Edit Course  ! -->
        <h1 class="modal-title">اطلاعات جدید را وارد کنید</h1>
        <form
          action=""
          method="post"
          class="edit-user-form"
          id="edit-course-form"
          enctype="multipart/form-data"
        >
          <input type="hidden" id="course-id" name="courseID" value="" />
          <div class="input-field">
            <span><i class="fa fa-tag"></i></span>
            <input
              type="text"
              id=""
              name="name"
              placeholder="نام دوره"
              spellcheck="false"
            />
          </div>
          <div class="input-field">
            <span><i class="fa fa-cash-register"></i></span>
            <input
              type="text"
              id=""
              name="price"
              placeholder="قیمت دوره"
              spellcheck="false"
            />
          </div>
          <div class="input-field">
            <span><i class="fa fa-user"></i></span>
            <input
              type="text"
              id=""
              name="teacher"
              placeholder="مدرس دوره"
              spellcheck="false"
            />
          </div>

          <button type="submit" class="update-btn btn">اپدیت دوره</button>
        </form>
      </div>
    </div>

    <!-- add new course modal-->
    <!-- ! add visible class to be visible ! -->
    <div class="modal-container" id="add-new-course-modal">
      <div class="modal-content">
        <!-- ! Edit Course  ! -->
        <h1 class="modal-title">اضافه کردن دوره جدید</h1>
        <form
          action="/courses"
          class="edit-user-form"
          method="post"
          enctype="multipart/form-data"
        >
          <div class="input-field">
            <span><i class="fa fa-tag"></i></span>
            <input
              type="text"
              id=""
              name="title"
              class="new-course-title"
              placeholder="نام دوره"
              spellcheck="false"
            />
          </div>
          <div class="input-field">
            <span><i class="fa fa-tag"></i></span>
            <input
              placeholder="تصویر دوره"
              type="file"
              id=""
              name="image"
              class="new-course-title"
              spellcheck="false"
            />
          </div>

          <button type="submit" class="add-course-btn update-btn btn">
            ایجاد دوره
          </button>
        </form>
      </div>
    </div>
    <!----------------------------------End modal -------------------------------- -->

    <div class="container">
      <!-- Sidebar -->
      <aside class="sidebar">
        <div class="sidebar-logo">
          <img src="/images/logo/logo.webp" alt="" />
          <h3>پنل مدیریت</h3>
        </div>
        <ul class="sidebar-links">
          <li>
            <a href="/home" class="sidebar-link">
              <!-- add active to enable link -->
              <span>
                <i class="fa fa-home"></i>
              </span>
              صفحه اصلی
            </a>
          </li>
          <li>
            <a href="/courses" class="active sidebar-link">
              <span>
                <i class="fa fa-tag"></i>
              </span>
              دوره‌ها
            </a>
          </li>
          <li>
            <a href="/about-me" class="sidebar-link">
              <span>
                <i class="fa fa-book-bookmark"></i>
              </span>
              درباره ما
            </a>
          </li>
        </ul>
        <div class="sidebar-logout">
          <a href="/" class="logout">
            <span>
              <i class="fa fa-lock"></i>
            </span>
            خروج
          </a>
        </div>
      </aside>
      <!-- End Sidebar -->

      <main class="main">
        <!-- Navbar -->
        <nav class="navbar">
          <div class="navbar-user-avatar">
            <img src="images/avatar/avatar.jpg" alt="" />
          </div>
        </nav>
        <!-- End Navbar -->

        <!-- Courses -->
        <section class="courses">
          <div class="courses-top">
            <h2 class="courses-title">دوره ها</h2>
            <a href="#" class="btn courses-btn-add-new-course"
              >اضافه کردن دوره جدید</a
            >
          </div>

          <!-- Courses List -->
          <ul class="courses-list">
            <%courses.forEach(function(course){%>
            <li class="courses-item">
              <div class="courses-img-title">
                <img
                  src="<%=baseUrl %><%=course.image.path%>"
                  alt=""
                  class="courses-img"
                />
                <h5 class="courses-name"><%= course.title %></h5>
              </div>
              <div class="courses-btns">
                <a
                  href="#"
                  class="courses-btn-edit btn"
                  data-id="<%= course._id%> "
                  >ویرایش</a
                >
                <a
                  href="/courses/remove/<%= course._id%>"
                  class="courses-btn-delete btn"
                  >حذف</a
                >
              </div>
            </li>
            <%})%>
          </ul>
          <!-- Courses List -->
        </section>
        <!-- End Courses -->
      </main>
    </div>
    <script src="/js/app.js"></script>
    <script src="/js/sweetalert.js"></script>
    <script>
      if ("<%= locals.messages.error %>") {
        swal({
          title: "<%= locals.messages.error %>",
          icon: "error",
          buttons: "Try Again",
        });
      } else if ("<%= locals.messages.success %>") {
        swal({
          title: "<%= locals.messages.success %>",
          icon: "success",
          buttons: "Huraaa 😍",
        });
      }
    </script>
  </body>
</html>
